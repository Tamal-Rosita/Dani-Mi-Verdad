[gd_scene load_steps=19 format=3 uid="uid://l8bpgmry05va"]

[ext_resource type="Script" uid="uid://cdhj5gruoyjwg" path="res://visual-novel/scripts/controllers/pointer_capture.gd" id="1_iaidk"]
[ext_resource type="Texture2D" uid="uid://doyodkg1ds7td" path="res://controller_examples/assets/textures/Sky.png" id="2_d4g1l"]
[ext_resource type="LightmapGIData" uid="uid://doxpkb7am7d7s" path="res://visual-novel/GJDDM/scenes/Metro/Metro.lmbake" id="3_k1euc"]
[ext_resource type="PackedScene" uid="uid://56203yb3xiie" path="res://visual-novel/GJDDM/scenes/Metro/MetroPanteones_lowpoly/MetroPanteones.glb" id="4_cees5"]
[ext_resource type="Script" uid="uid://dmcynp0g0020r" path="res://visual-novel/scripts/controllers/controller_side_ai.gd" id="6_jbw4d"]
[ext_resource type="Script" uid="uid://cve242f0ec8v" path="res://visual-novel/scripts/controllers/controller_side_player.gd" id="7_jbw4d"]
[ext_resource type="PackedScene" uid="uid://dcjpkqhi816nl" path="res://visual-novel/characters/novel_character_base.tscn" id="8_bxrcy"]
[ext_resource type="PackedScene" uid="uid://b4mo77etnecyx" path="res://visual-novel/legacy/SideScroller/characters/Gael_Side.scn" id="9_mb38d"]
[ext_resource type="Script" uid="uid://ctpibhc6cx70y" path="res://visual-novel/scripts/character/player.gd" id="9_xn8c1"]
[ext_resource type="PackedScene" uid="uid://do1f5t0qor5r5" path="res://visual-novel/GJDDM/characters/packed/samuel.scn" id="10_70wuj"]
[ext_resource type="Resource" uid="uid://dn6nr207yscac" path="res://dialogic/characters/Samuel.dch" id="10_xn8c1"]
[ext_resource type="Script" uid="uid://ci8jypb046k3x" path="res://visual-novel/scripts/camera/tunnel-side-follow.gd" id="11_1o2xk"]
[ext_resource type="PackedScene" uid="uid://dh6bl7wdssg5h" path="res://visual-novel/GJDDM/characters/packed/natalia.scn" id="12_70wuj"]
[ext_resource type="Resource" uid="uid://cxyovka11esjy" path="res://dialogic/timelines/presentation.dtl" id="12_iaidk"]
[ext_resource type="Resource" uid="uid://2it1bfo05cka" path="res://dialogic/characters/Natalia.dch" id="12_xd7y0"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_6c4vd"]
panorama = ExtResource("2_d4g1l")

[sub_resource type="Sky" id="Sky_5ngqa"]
sky_material = SubResource("PanoramaSkyMaterial_6c4vd")

[sub_resource type="Environment" id="Environment_ctwiv"]
background_mode = 1
background_color = Color(0.7019608, 0.69411767, 0.6431373, 1)
background_energy_multiplier = 1.5
sky = SubResource("Sky_5ngqa")
ambient_light_color = Color(0.32915837, 0.3291584, 0.3291584, 1)
ambient_light_energy = 1.5
tonemap_white = 1.5
fog_enabled = true
adjustment_saturation = 1.5

[node name="Main" type="Node3D"]
script = ExtResource("1_iaidk")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ctwiv")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.8194523, 0.5731474, 0, -0.5731474, 0.8194523, 0, 2.9475758, 0)
light_color = Color(0.90671605, 0.94047564, 0.8134223, 1)
light_energy = 0.9
light_indirect_energy = 1.5
shadow_enabled = true
directional_shadow_mode = 1

[node name="LightmapGI" type="LightmapGI" parent="."]
supersampling = true
interior = true
max_texture_size = 2048
generate_probes_subdiv = 1
light_data = ExtResource("3_k1euc")

[node name="MetroPanteones" parent="." instance=ExtResource("4_cees5")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 0, 0, 0)

[node name="ReflectionProbe" type="ReflectionProbe" parent="."]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 15.755188, 2.5835783, 2.6792662)
size = Vector3(10.108871, 6.564144, 63.259476)
interior = true

[node name="Controllers" type="Node" parent="."]

[node name="AIController-PatrolLine" type="Node" parent="Controllers" node_paths=PackedStringArray("controlled_obj")]
script = ExtResource("6_jbw4d")
INPUT_DELAY = 2.0
rotation_angle = 180.0
controlled_obj = NodePath("../../Characters/Samuel")

[node name="PlayerController" type="Node" parent="Controllers" node_paths=PackedStringArray("controlled_obj")]
script = ExtResource("7_jbw4d")
controlled_obj = NodePath("../../Characters/Player")

[node name="Characters" type="Node" parent="."]

[node name="Player" parent="Characters" instance=ExtResource("8_bxrcy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 1.132, 5)
script = ExtResource("9_xn8c1")
use_player_cam = false
dialogic_character = ExtResource("12_xd7y0")
vrm_scene = ExtResource("12_70wuj")
camera_height_offset = -0.1
face_height_ratio = 0.9
speed = 1.85

[node name="Samuel" parent="Characters" instance=ExtResource("8_bxrcy")]
transform = Transform3D(0.8901969, 0, -0.45557597, 0, 1, 0, 0.45557597, 0, 0.8901969, 11.295285, 1.1394036, 6.129299)
timeline = ExtResource("12_iaidk")
dialogic_character = ExtResource("10_xn8c1")
vrm_scene = ExtResource("10_70wuj")
camera_height_offset = -0.1
face_height_ratio = 0.9
speed = 1.55

[node name="Gael" parent="Characters" instance=ExtResource("9_mb38d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.770225, 1.132, 3.96)

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 2.75, 7.11177)
current = true
fov = 55.0
far = 500.0
script = ExtResource("11_1o2xk")
target = NodePath("../Characters/Player")
offset = Vector3(0, 1, 0.5)
dead_zone_width = 2.5
dead_zone_depth = 3.0
follow_speed = 0.5
use_limits = true
x_min_limit = -11.0
x_max_limit = 40.0
z_min_limit = 4.5
z_max_limit = 7.5
